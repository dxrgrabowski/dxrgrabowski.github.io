<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="PrefaceI was wondering how big the overhead is before and&#x2F;or after program execution. It was unreasonable to start with anything other than the simplest program with a blank main: 1int main() &amp;#1">
<meta property="og:type" content="article">
<meta property="og:title" content="From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program">
<meta property="og:url" content="http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/index.html">
<meta property="og:site_name" content="Dawid Grabowski&#39;s Blog">
<meta property="og:description" content="PrefaceI was wondering how big the overhead is before and&#x2F;or after program execution. It was unreasonable to start with anything other than the simplest program with a blank main: 1int main() &amp;#1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/callgrind_graph_1.png">
<meta property="og:image" content="http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/callgrind_list_1.png">
<meta property="og:image" content="http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/callgrind_list_2.png">
<meta property="article:published_time" content="2024-09-07T14:22:24.000Z">
<meta property="article:modified_time" content="2024-10-13T16:13:13.208Z">
<meta property="article:author" content="Dawid Grabowski">
<meta property="article:tag" content="C">
<meta property="article:tag" content="programming">
<meta property="article:tag" content="valgrind">
<meta property="article:tag" content="perf">
<meta property="article:tag" content="assembly">
<meta property="article:tag" content="linker">
<meta property="article:tag" content="libc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/callgrind_graph_1.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/DXR_cut_rounded.png">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/DXR_cut_rounded.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/DXR_cut_rounded.png">
        
      
    
    <!-- title -->
    <title>From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-M1CMTMN59L"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M1CMTMN59L');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/dxrgrabowski">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/09/17/2-syscalls-asm-glibc/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/09/04/0-erasmus-dresden/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&text=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&is_video=false&description=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program&body=Check out this article: http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&name=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&t=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Analysis-Tools"><span class="toc-number">2.</span> <span class="toc-text">Analysis Tools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Callgrind-Call-Map-Call-List-of-dynamically-linked-program"><span class="toc-number">3.</span> <span class="toc-text">Callgrind Call Map &amp; Call List of dynamically linked program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-perf-stat-of-static-dynamic-approach-comparison"><span class="toc-number">4.</span> <span class="toc-text">Running perf stat of static &amp; dynamic approach comparison</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Callee-List-of-statically-linked-program"><span class="toc-number">5.</span> <span class="toc-text">Callee List of statically linked program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-and-Memory-Tunables"><span class="toc-number">6.</span> <span class="toc-text">CPU and Memory Tunables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">7.</span> <span class="toc-text">Conclusion</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Dawid Grabowski</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-09-07T14:22:24.000Z" class="dt-published" itemprop="datePublished">2024-09-07</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/Operating-System-Construction/">Operating System Construction</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/C/" rel="tag">C</a>, <a class="p-category" href="/tags/assembly/" rel="tag">assembly</a>, <a class="p-category" href="/tags/libc/" rel="tag">libc</a>, <a class="p-category" href="/tags/linker/" rel="tag">linker</a>, <a class="p-category" href="/tags/perf/" rel="tag">perf</a>, <a class="p-category" href="/tags/programming/" rel="tag">programming</a>, <a class="p-category" href="/tags/valgrind/" rel="tag">valgrind</a>
    </div>


    </div>
    <span class="word-count"></span>
    <span class="reading-time"></span>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>I was wondering how big the overhead is before and&#x2F;or after program execution. It was unreasonable to start with anything other than the simplest program with a blank <code>main</code>:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>Theoretically, it is possible to compile a void main in C, which would remove the return value. However, that is not valid according to the ISO standard (<a target="_blank" rel="noopener" href="https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf">C++ §3.6.1&#x2F;2</a> | <a target="_blank" rel="noopener" href="https://www.open-std.org/JTC1/sc22/WG14/www/docs/n2310.pdf">C §5.1.2.2&#x2F;1</a>). So we will skip it.</p>
<p>When we try to disassemble this code, we get an assembly with 5 instructions:</p>
<figure class="highlight as"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">push    rbp      <span class="comment">// push base pointer on stack to stabilize stack frame</span></span><br><span class="line">mov     rbp, rsp <span class="comment">// set base pointer on local stack pointer</span></span><br><span class="line">mov     eax, <span class="number">1</span>   <span class="comment">// eax commonly stores the function return value set it to 1</span></span><br><span class="line">pop     rbp      <span class="comment">// close the stack frame</span></span><br><span class="line">ret              <span class="comment">// return form procedure</span></span><br></pre></td></tr></table></figure>
<p>Technically speaking, stack and stack pointer operations are not needed in this context, so the code could be reduced to:</p>
<figure class="highlight as"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov     eax, <span class="number">1</span></span><br><span class="line">ret</span><br></pre></td></tr></table></figure>
<p>Now, guess how many instructions it takes to execute the above program. The answer is <span class="reveal-text" before="???" after="112 047"></span>.<br>This value is hard to believe, considering that the program itself is just 5 instructions. We will try to find out what and why this happens.</p>
<h2 id="Analysis-Tools"><a href="#Analysis-Tools" class="headerlink" title="Analysis Tools"></a>Analysis Tools</h2><p>Mainly, two tools will be used for the analysis <code>valgrind --tool=callgrind</code> and <code>perf</code>. For visualization, I used Callgrind because of its GUI tool and the greater clarity of the results. The most important factor I chose was instruction count because it is machine-independent and deterministic. The runtime environment doesn’t have to be exactly the same to perform profiling, which is not true for cycles and especially for execution time.</p>
<h2 id="Callgrind-Call-Map-Call-List-of-dynamically-linked-program"><a href="#Callgrind-Call-Map-Call-List-of-dynamically-linked-program" class="headerlink" title="Callgrind Call Map &amp; Call List of dynamically linked program"></a>Callgrind Call Map &amp; Call List of dynamically linked program</h2><p><img src="/2024/09/07/1-smallest-c-prog/callgrind_graph_1.png" alt="callgrind call map"><br><img src="/2024/09/07/1-smallest-c-prog/callgrind_list_1.png" alt="callgrind call list"><br>As we can see, 98.22% of instructions were made outside the program. In ld-linux-x86-64.so which is a dynamic Linux linker <span class="reveal-text" before="DLL" after="dynamic library"></span>. We see methods like <em>_dl_sysdep_start</em>, <em>dl_start</em>, <em>dl_main</em>, <em>dl_relocate_object</em>, <em>dl_lookup_symbol_x</em>. These are part of the dynamic loading process. Their goal is to load, init, relocate and <span class="reveal-text" before="resolve symbols" after="find function and variables names"></span>used in prog contained, for example in libc.so. Later, we can see <em>handle_amd</em> or <em>handle_intel</em> are involved in the initialization and detection of specific processor functions (like SSE extension support, AVX, etc.). Even if your program does not use these functions directly, the system must initialize the CPU to adapt to the appropriate hardware environment. </p>
<h2 id="Running-perf-stat-of-static-dynamic-approach-comparison"><a href="#Running-perf-stat-of-static-dynamic-approach-comparison" class="headerlink" title="Running perf stat of static &amp; dynamic approach comparison"></a>Running perf stat of static &amp; dynamic approach comparison</h2><p>Let’s run <code>perf stat</code> to have some unified result to compare it later</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.42</span>    msec task-clock:u              #  <span class="number">0.571</span> CPUs utilized</span><br><span class="line"><span class="number">48</span>      page-faults:u                  #  <span class="number">115.551</span> K/sec</span><br><span class="line"><span class="number">331515</span>  cycles:u                       #  <span class="number">0.798</span> GHz</span><br><span class="line"><span class="number">16380</span>   stalled-cycles-frontend:u      #  <span class="number">4.94</span>% frontend cycles idle</span><br><span class="line"><span class="number">1911</span>    stalled-cycles-backend:u       #  <span class="number">0.58</span>% backend cycles idle</span><br><span class="line"><span class="number">112047</span>  instructions:u                 #  <span class="number">0.34</span>  insn per cycle</span><br><span class="line">                                       #  <span class="number">0.15</span>  stalled cycles per insn</span><br><span class="line"><span class="number">22072</span>   branches:u                     #  <span class="number">53.134</span> M/sec</span><br><span class="line"><span class="number">1830</span>    branch-misses:u                #  <span class="number">8.29</span>% of all branches</span><br><span class="line"></span><br><span class="line"><span class="number">0.000727095</span> seconds time elapsed</span><br></pre></td></tr></table></figure>
<p>Okay, if most of the program time is taken up by the linker and loading dynamic libraries, let’s do it statically -&gt; <code>gcc -static prog.cpp -o prog</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.21</span>    msec task-clock:u             #  <span class="number">0.529</span> CPUs utilized</span><br><span class="line"><span class="number">24</span>      page-faults:u                 #  <span class="number">112.888</span> K/sec</span><br><span class="line"><span class="number">123046</span>  cycles:u                      #  <span class="number">0.579</span> GHz</span><br><span class="line"><span class="number">19125</span>   stalled-cycles-frontend:u     #  <span class="number">15.54</span>% frontend cycles idle</span><br><span class="line"><span class="number">10628</span>   stalled-cycles-backend:u      #  <span class="number">8.64</span>% backend cycles idle</span><br><span class="line"><span class="number">26274</span>   instructions:u                #  <span class="number">0.21</span>  insn per cycle</span><br><span class="line">                                      #  <span class="number">0.73</span>  stalled cycles per insn</span><br><span class="line"><span class="number">6775</span>    branches:u                    #  <span class="number">31.867</span> M/sec</span><br><span class="line"><span class="number">690</span>     branch-misses:u               #  <span class="number">10.18</span>% of all branches</span><br><span class="line"></span><br><span class="line"><span class="number">0.000402128</span> seconds time elapsed</span><br></pre></td></tr></table></figure>

<p>We can see that the number of instructions has decreased 4.26 times. However, the binary size increased from <span style="color:green">15776</span> to <span style="color:red">900 224</span> bytes, which is a huge difference (<span class="reveal-text" before="x57" after="5706%"></span>). This is because the libraries that were previously dynamically linked to the system are now stored in the binary code of the program.</p>
<h2 id="Callee-List-of-statically-linked-program"><a href="#Callee-List-of-statically-linked-program" class="headerlink" title="Callee List of statically linked program"></a>Callee List of statically linked program</h2><p><img src="/2024/09/07/1-smallest-c-prog/callgrind_list_2.png" alt="callee list"><br>I won’t paste the glibc library code here for the sake of cleanliness. But as you can see, the __tunables_init function is the main culprit. The main purpose of this function is to allow you to configure the behavior of the glibc library via environment variables. This allows you to customize certain aspects of the library’s behavior without having to recompile your program. A minimum set of these variables must be initialized because the C runtime doesn’t know in advance that your program is just a blank main function and won’t use most features, so it prepares for all possibilities.</p>
<h2 id="CPU-and-Memory-Tunables"><a href="#CPU-and-Memory-Tunables" class="headerlink" title="CPU and Memory Tunables"></a>CPU and Memory Tunables</h2><p>For example, there are tunables related to the CPU and memory management. CPU variables such as cache size and thresholds for optimized copy instructions must be set, regardless of the actual CPU manufacturer. This explains why functions such as <em>handle_intel</em> and <em>intel_check_word</em> are called, even though both my PC and WSL are Ryzen. Their total of 19% can be partly justified by querying hardware or system constants.</p>
<p>Equally important are the variables related to memory management, particularly the entire set of glibc.malloc variables. These parameters control key aspects of memory allocation, such as the size and number of memory arenas, the thresholds for using mmap instead of sbrk, and the behavior of the thread cache. For example, glibc.malloc.arena_max can significantly affect memory usage on multi-core systems, while glibc.malloc.mmap_threshold determines when the system will use mmap to allocate larger blocks of memory.</p>
<p>All tunables you can find <a target="_blank" rel="noopener" href="https://www.gnu.org/software/libc/manual/html_node/Tunables.html">here</a> or by calling <code>/lib64/ld-linux-x86-64.so.2 --list-tunables</code></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This is my first technical article. It was intended to illustrate the differences between dynamic and static linking, more or less show the costs and benefits of each, and explain why it happens and what is responsible for it.</p>
<p> In the next one, we will dive deeper into C compiled without glibc and explore the shortest program in assembly and its binary. I really appreciate any feedback, so if you have any comments or suggestions, feel free to leave a comment below ⬇️.</p>

  </div>
</article>
<div class="social-buttons-container">
    
        <div class="button-wrapper">
            <button class="terminal-button" onclick="window.open('https://www.linkedin.com/newsletters/low-level-tech-articles-7249831254945107969', '_blank')">
                [Subscribe Newsletter]
            </button>
            <button class="terminal-button" onclick="window.open('www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=dawidgraabowski', '_blank')">
                [Connect with me on LinkedIn]
            </button>
        </div>
    
</div>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/dxrgrabowski">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">1.</span> <span class="toc-text">Preface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Analysis-Tools"><span class="toc-number">2.</span> <span class="toc-text">Analysis Tools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Callgrind-Call-Map-Call-List-of-dynamically-linked-program"><span class="toc-number">3.</span> <span class="toc-text">Callgrind Call Map &amp; Call List of dynamically linked program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-perf-stat-of-static-dynamic-approach-comparison"><span class="toc-number">4.</span> <span class="toc-text">Running perf stat of static &amp; dynamic approach comparison</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Callee-List-of-statically-linked-program"><span class="toc-number">5.</span> <span class="toc-text">Callee List of statically linked program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU-and-Memory-Tunables"><span class="toc-number">6.</span> <span class="toc-text">CPU and Memory Tunables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">7.</span> <span class="toc-text">Conclusion</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&text=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&is_video=false&description=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program&body=Check out this article: http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&title=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&name=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://dxrgrabowski.github.io/2024/09/07/1-smallest-c-prog/&t=From Instruction Count to Clock Cycles: Exploring the Performance of Minimal C Program"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2024
    Dawid Grabowski
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/dxrgrabowski">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'dxrgrabowski/dxrgrabowski.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
